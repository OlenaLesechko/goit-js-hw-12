{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport axios from \"axios\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst formElement = document.querySelector('.form-search');\nconst inputElement = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader-container');\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nconst API_KEY = '41575459-699006cd61f4fecce9ea2d52d';\nlet page = 1;\nlet query;\nlet perPage = 40;\n\n\nlet requestParams = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n};\n\nasync function searchImages(q, page) {\n    const searchParams = new URLSearchParams(requestParams);\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n\n        hideLoader();\n        const { hits, totalHits } = response.data;\n        const gallery = document.querySelector('.gallery');\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionType: 'attr',\n            captionsData: 'alt',\n            captionDelay: 250,\n            captionPosition: 'bottom',\n            close: true,\n            enableKeyboard: true,\n            docClose: true,\n        });\n        lightbox.refresh();\n         \n        if (page === 1)\n            gallery.innerHTML = '';\n    \n        const galleryHTML = hits.reduce(\n            (html, image) =>\n                html +\n                `<li class=\"gallery-item\">\n              <a class=\"image-link link\" href=\"${image.largeImageURL}\">\n              <img class=\"images\" data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" src=\"${image.webformatURL}\" width=\"360\" height=\"200\">\n              </a>\n              <div class=\"information\">\n              <p>Likes: ${image.likes}</p>\n              <p>Views: ${image.views}</p>\n              <p>Comments: ${image.comments}</p>\n              <p>Downloads: ${image.downloads}</p>\n        </div>\n      </li>`,\n            ''\n        );\n        gallery.insertAdjacentHTML('beforeend', galleryHTML);\n        lightbox.refresh();\n         \n        if (page * perPage >= totalHits) {\n            btnLoadMore.style.display = 'none';\n            iziToast.error({\n                title: 'Error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            btnLoadMore.style.display = 'block';\n            const scrollImages = document\n                .querySelector('.image-link')\n                .getBoundingClientRect().height;\n            window.scrollBy({\n                top: scrollImages * 2,\n                behavior: 'smooth',\n            });\n        }\n         \n    } catch (error) {\n        hideLoader();\n\n        iziToast.error({\n            title: 'Error',\n            message: error.message,\n            position: 'topRight',\n        });\n    }\n    };\n\n\n  \n    formElement.addEventListener('submit', event => {\n        event.preventDefault();\n\n        const searchQuery = inputElement.value.trim();\n        page = 1;\n        btnLoadMore.style.display = 'none'\n        searchImages(searchQuery, page);\n        formElement.reset();\n    });\n    btnLoadMore.addEventListener('click', () => {\n  page += 1;\n  searchImages(query, page);\n});"],"names":["formElement","inputElement","loader","btnLoadMore","hideLoader","API_KEY","page","query","perPage","requestParams","searchImages","q","searchParams","response","axios","hits","totalHits","gallery","lightbox","SimpleLightbox","galleryHTML","html","image","iziToast","scrollImages","error","event","searchQuery"],"mappings":"owBAQA,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAe,SAAS,cAAc,aAAa,EACnDC,EAAS,SAAS,cAAc,mBAAmB,EACnDC,EAAc,SAAS,cAAc,gBAAgB,EAM3D,SAASC,GAAa,CACpBF,EAAO,MAAM,QAAU,MACzB,CAEA,MAAMG,EAAU,qCAChB,IAAIC,EAAO,EACPC,EACAC,EAAU,GAGVC,EAAgB,CAChB,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAUE,CACd,EAEA,eAAeE,EAAaC,EAAGL,EAAM,CACjC,MAAMM,EAAe,IAAI,gBAAgBH,CAAa,EAEtD,GAAI,CACA,MAAMI,EAAW,MAAMC,EAAM,IAAI,4BAA4BF,GAAc,EAE3ER,IACA,KAAM,CAAE,KAAAW,EAAM,UAAAC,GAAcH,EAAS,KAC/BI,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,YAAa,OACb,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,MAAO,GACP,eAAgB,GAChB,SAAU,EACtB,CAAS,EACDD,EAAS,QAAO,EAEZZ,IAAS,IACTW,EAAQ,UAAY,IAExB,MAAMG,EAAcL,EAAK,OACrB,CAACM,EAAMC,IACHD,EACA;AAAA,iDACiCC,EAAM;AAAA,iDACNA,EAAM,uBAAuBA,EAAM,cAAcA,EAAM;AAAA;AAAA;AAAA,0BAG9EA,EAAM;AAAA,0BACNA,EAAM;AAAA,6BACHA,EAAM;AAAA,8BACLA,EAAM;AAAA;AAAA,aAGxB,EACZ,EAIQ,GAHAL,EAAQ,mBAAmB,YAAaG,CAAW,EACnDF,EAAS,QAAO,EAEZZ,EAAOE,GAAWQ,EAClBb,EAAY,MAAM,QAAU,OAC5BoB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6DACT,SAAU,UAC1B,CAAa,MACE,CACHpB,EAAY,MAAM,QAAU,QAC5B,MAAMqB,EAAe,SAChB,cAAc,aAAa,EAC3B,sBAAqB,EAAG,OAC7B,OAAO,SAAS,CACZ,IAAKA,EAAe,EACpB,SAAU,QAC1B,CAAa,CACJ,CAEJ,OAAQC,EAAP,CACErB,IAEAmB,EAAS,MAAM,CACX,MAAO,QACP,QAASE,EAAM,QACf,SAAU,UACtB,CAAS,CACJ,CAEL,CAGIzB,EAAY,iBAAiB,SAAU0B,GAAS,CAC5CA,EAAM,eAAc,EAEpB,MAAMC,EAAc1B,EAAa,MAAM,KAAI,EAC3CK,EAAO,EACPH,EAAY,MAAM,QAAU,OAC5BO,EAAaiB,EAAarB,CAAI,EAC9BN,EAAY,MAAK,CACzB,CAAK,EACDG,EAAY,iBAAiB,QAAS,IAAM,CAC9CG,GAAQ,EACRI,EAAaH,EAAOD,CAAI,CAC1B,CAAC"}